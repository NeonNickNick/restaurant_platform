{% extends "base.html" %}

{% block title %}é¦–é¡µ - é¤å…ç‚¹é¤å¹³å°{% endblock %}

{% block content %}
<div class="jumbotron jumbotron-fluid bg-light py-5">
    <div class="container text-center">
        <h1 class="display-4 mb-3">æ¬¢è¿æ¥åˆ°é¤å…ç‚¹é¤å¹³å°</h1>
        <p class="lead">ä¸€ä¸ªé›†é¤å…ç®¡ç†ã€åœ¨çº¿ç‚¹é¤äºä¸€ä½“çš„ç»¼åˆå¹³å°</p>
        
        {% if current_user.is_authenticated %}
        <p class="lead">æ¬¢è¿å›æ¥ï¼Œ{{ current_user.username }}ï¼</p>
        {% endif %}
        
        <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
            <!-- æˆ‘è¦ç‚¹é¤æŒ‰é’® - æ ¹æ®ç™»å½•çŠ¶æ€æ˜¾ç¤º -->
            {% if current_user.is_authenticated %}
                <!-- å·²ç™»å½•ç”¨æˆ·æ˜¾ç¤ºå®é™…ç‚¹é¤é“¾æ¥ -->
                <a href="{{ url_for('main.restaurants') }}" 
                   class="btn btn-primary btn-lg px-4 me-md-2">
                    <i class="bi bi-cart"></i> æˆ‘è¦ç‚¹é¤
                </a>
            {% else %}
                <!-- æœªç™»å½•ç”¨æˆ·æ˜¾ç¤ºæç¤º -->
                <button onclick="alert('è¯·å…ˆç™»å½•ä»¥ä½¿ç”¨ç‚¹é¤åŠŸèƒ½'); window.location.href='{{ url_for('auth.login') }}';" 
                        class="btn btn-primary btn-lg px-4 me-md-2">
                    <i class="bi bi-cart"></i> æˆ‘è¦ç‚¹é¤
                </button>
            {% endif %}
            
            <!-- ç®¡ç†é¤å…æŒ‰é’® - æ ¹æ®ç”¨æˆ·çŠ¶æ€æ˜¾ç¤ºä¸åŒå†…å®¹ -->
            {% if current_user.is_authenticated %}
                {% if current_user.restaurant %}
                    <!-- ç”¨æˆ·å·²æœ‰é¤å…ï¼Œæ˜¾ç¤ºç®¡ç†é¤å… -->
                    <a href="{{ url_for('restaurant.dashboard', restaurant_id=current_user.restaurant.id) }}" 
                       class="btn btn-success btn-lg px-4">
                        <i class="bi bi-shop"></i> ç®¡ç†é¤å…
                    </a>
                {% else %}
                    <!-- ç”¨æˆ·æ²¡æœ‰é¤å…ï¼Œæ˜¾ç¤ºåˆ›å»ºé¤å… -->
                    <a href="{{ url_for('restaurant.create') }}" 
                       class="btn btn-success btn-lg px-4">
                        <i class="bi bi-plus-circle"></i> åˆ›å»ºé¤å…
                    </a>
                {% endif %}
            {% else %}
                <!-- ç”¨æˆ·æœªç™»å½•ï¼Œæ˜¾ç¤ºç™»å½•æŒ‰é’® -->
                <a href="{{ url_for('auth.login') }}" 
                   class="btn btn-success btn-lg px-4">
                    <i class="bi bi-box-arrow-in-right"></i> ç™»å½•ç®¡ç†
                </a>
            {% endif %}
        </div>
        
        <!-- å¿«é€Ÿè®¿é—®ï¼ˆç™»å½•ç”¨æˆ·æ˜¾ç¤ºï¼‰ -->
        {% if current_user.is_authenticated %}
        <div class="mt-4">
            <div class="row justify-content-center">
                <div class="col-auto">
                    <a href="{{ url_for('main.my_table') }}" 
                       class="btn btn-outline-primary position-relative">
                        <i class="bi bi-cart3"></i> æˆ‘çš„é¤æ¡Œ
                        {% if session.get('cart') %}
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            {{ session.cart.values()|sum(attribute='quantity') }}
                        </span>
                        {% endif %}
                    </a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<div class="container mt-5">
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <i class="bi bi-egg-fried display-4 text-primary mb-3"></i>
                    <h5 class="card-title">ä¸°å¯Œèœå“</h5>
                    <p class="card-text">ä¼—å¤šé¤å…æä¾›å„å¼å„æ ·çš„ç¾é£Ÿï¼Œæ»¡è¶³æ‚¨çš„ä¸åŒå£å‘³ã€‚</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <i class="bi bi-truck display-4 text-success mb-3"></i>
                    <h5 class="card-title">å¿«é€Ÿé…é€</h5>
                    <p class="card-text">é«˜æ•ˆé…é€æœåŠ¡ï¼Œè®©æ‚¨çš„ç¾é£Ÿå¿«é€Ÿé€è¾¾ã€‚</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <i class="bi bi-shield-check display-4 text-warning mb-3"></i>
                    <h5 class="card-title">å®‰å…¨æ”¯ä»˜</h5>
                    <p class="card-text">å¤šç§å®‰å…¨æ”¯ä»˜æ–¹å¼ï¼Œä¿éšœæ‚¨çš„äº¤æ˜“å®‰å…¨ã€‚</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mt-5">
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">é¡¾å®¢åŠŸèƒ½</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            æµè§ˆé¤å…èœå“
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            åœ¨çº¿ä¸‹å•ç‚¹é¤
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            æŸ¥çœ‹è®¢å•çŠ¶æ€
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            ç®¡ç†ä¸ªäººèµ„æ–™
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            æ™ºèƒ½èœå“å’¨è¯¢
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">é¤å…ç®¡ç†åŠŸèƒ½</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            åˆ›å»ºå’Œç®¡ç†é¤å…
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            ç®¡ç†èœå“å’Œåˆ†ç±»
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            å¤„ç†é¡¾å®¢è®¢å•
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            æŸ¥çœ‹ç»è¥æ•°æ®æŠ¥è¡¨
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success me-2"></i>
                            æ™ºèƒ½ç»è¥é¡¾é—®
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- æ–°åŠŸèƒ½ä»‹ç» -->
<div class="container mt-5">
    <div class="card">
        <div class="card-header bg-info text-white">
            <h4 class="mb-0">ğŸš€ å…¨æ–°ç‚¹é¤åŠŸèƒ½ä¸Šçº¿ï¼</h4>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 text-center mb-3">
                    <i class="bi bi-shop-window display-4 text-primary"></i>
                    <h5 class="mt-3">æµè§ˆé¤å…</h5>
                    <p class="text-muted">æŒ‰é”€å”®é¢æ’åºï¼Œå‘ç°çƒ­é—¨é¤å…</p>
                </div>
                <div class="col-md-4 text-center mb-3">
                    <i class="bi bi-egg-fried display-4 text-success"></i>
                    <h5 class="mt-3">åœ¨çº¿ç‚¹é¤</h5>
                    <p class="text-muted">æŸ¥çœ‹èœå“è¯¦æƒ…ï¼Œä¸€é”®åŠ å…¥é¤æ¡Œ</p>
                </div>
                <div class="col-md-4 text-center mb-3">
                    <i class="bi bi-chat-dots display-4 text-warning"></i>
                    <h5 class="mt-3">æ™ºèƒ½å’¨è¯¢</h5>
                    <p class="text-muted">AIåŠ©æ‰‹è§£ç­”èœå“ç›¸å…³é—®é¢˜</p>
                </div>
            </div>
            
            <div class="text-center mt-4">
                {% if current_user.is_authenticated %}
                <a href="{{ url_for('main.restaurants') }}" class="btn btn-primary btn-lg">
                    <i class="bi bi-rocket-takeoff"></i> ç«‹å³ä½“éªŒç‚¹é¤åŠŸèƒ½
                </a>
                {% else %}
                <a href="{{ url_for('auth.register') }}" class="btn btn-success btn-lg me-2">ç«‹å³æ³¨å†Œ</a>
                <a href="{{ url_for('auth.login') }}" class="btn btn-outline-primary btn-lg">ç«‹å³ç™»å½•</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="text-center mt-5 mb-5">
    <h3>ç«‹å³åŠ å…¥æˆ‘ä»¬</h3>
    <p class="text-muted">æ— è®ºæ‚¨æ˜¯é¡¾å®¢è¿˜æ˜¯é¤å…ç»è¥è€…ï¼Œè¿™é‡Œéƒ½æœ‰æ‚¨éœ€è¦çš„åŠŸèƒ½</p>
    <div class="mt-3">
        <a href="{{ url_for('auth.register') }}" class="btn btn-outline-primary me-2">ç«‹å³æ³¨å†Œ</a>
        <a href="{{ url_for('auth.login') }}" class="btn btn-outline-secondary">ç«‹å³ç™»å½•</a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// ç®€å•çš„é¡µé¢åŠ è½½å®Œæˆæç¤º
document.addEventListener('DOMContentLoaded', function() {
    console.log('é¤å…ç‚¹é¤å¹³å°é¦–é¡µåŠ è½½å®Œæˆ');
    
    // æ£€æŸ¥æŒ‰é’®çŠ¶æ€
    const manageBtn = document.querySelector('.btn-success');
    if (manageBtn && manageBtn.textContent.includes('ç®¡ç†é¤å…')) {
        manageBtn.addEventListener('click', function() {
            console.log('è·³è½¬åˆ°é¤å…ç®¡ç†:', this.href);
        });
    }
    
    // ä¸ºæœªç™»å½•ç”¨æˆ·çš„ç‚¹é¤æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
    const orderBtn = document.querySelector('.btn-primary[onclick]');
    if (orderBtn) {
        orderBtn.addEventListener('click', function(e) {
            if (!this.classList.contains('disabled')) {
                console.log('æœªç™»å½•ç”¨æˆ·å°è¯•ç‚¹é¤ï¼Œæç¤ºç™»å½•');
            }
        });
    }
});
</script>
{% endblock %}